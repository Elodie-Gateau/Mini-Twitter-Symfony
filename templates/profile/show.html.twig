{% extends 'base.html.twig' %}

{% block title %}Profil de {{user.name}} {{user.firstName}} {% endblock %}

{% block body %}


	<section class="bg-gray-100 p-4 sm:p-6 md:p-8 lg:p-10"> 


	{# Card Profil de l'user connecté #}
		<div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden md:flex">
			<div class="md:flex-shrink-0 p-6 flex flex-col items-center justify-center bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-t-xl md:rounded-l-xl md:rounded-tr-none">
				<img class="h-24 w-24 rounded-full object-cover border-4 border-white shadow-md mb-4" src="{{ asset('uploads/photos/' ~ app.user.photo) }}" alt="Photo de profil de l'utilisateur">
				<h1 class="text-3xl font-extrabold text-center">{{ user.name }}</h1>
				<p class="text-lg font-light text-center opacity-90">@{{ user.nickname }}</p>
			</div>

			<div class="p-6 md:p-8 flex-1">
				<h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b-2 border-blue-200 pb-2">Informations du profil</h2>
				<div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700">

					<p>
						<strong class="font-medium text-gray-900">Nom de l'utilisateur :</strong>
						{{ user.name }}</p>
					<p>
						<strong class="font-medium text-gray-900">Prénom de l'utilisateur :</strong>
						{{ user.firstName }}</p>
					<p>
						<strong class="font-medium text-gray-900">Pseudo de l'utilisateur :</strong>
						{{ user.nickName }}</p>
					<p>
						<strong class="font-medium text-gray-900">Âge de l'utilisateur :</strong>
						{{ user.age }} ans</p>

					<p class="md:col-span-2">
						<strong class="font-medium text-gray-900">Email de l'utilisateur :</strong>
						{{ user.email }}</p>
					
					{% if user.isAdmin %}
					<p class="md:col-span-2">
						<strong class="font-medium text-gray-900">Utilisateur administrateur :</strong>

						{{ user.isAdmin ? "Oui" : "Non" }}</p>
					{% endif %}
				</div>
			</div>
		</div>

	{# Section historique de tweets #}
		<div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg mt-8 p-6 md:p-8">
			<h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b-2 border-blue-200 pb-2">Mes Tweets</h2>

			{% if user.tweets is not empty %}
				{% for tweet in user.tweets %}
				{# Tri par ordre antichronologique : ajout d'un order by dans l'entité User sur relation Tweet #}
				 <a href="{{ path('app_tweet_show', {'id': tweet.id}) }}" class="block no-underline">
					<div class="bg-blue-50 p-4 g-2 rounded-lg mb-4 last:mb-0 border border-blue-200">
						<p class="text-gray-800 mb-2">{{ tweet.content }}</p>
						<small class="text-gray-500 text-sm">Publié le
							{{ tweet.creationtime|date('d/m/Y H:i') }}</small>
					</div>
				{% endfor %}
			{% else %}
				<p class="text-gray-600 italic">Cet utilisateur n'a pas encore publié de tweets.</p>
			{% endif %}
		</div>


		<div class="max-w-4xl mx-auto mt-8 flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
			<a href="{{ path('app_tweet_index')}}" class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded cursor-pointer mt-2">
				Retour à l'Accueil
			</a>

			<a href="{{ path('app_profile_edit', {'id': app.user.id}) }}" class="bg-transparent hover:bg-green-500 text-green-700 font-semibold hover:text-white py-2 px-4 border border-green-500 hover:border-transparent rounded cursor-pointer mt-2">
				Modifier le profil
			</a>
			<form action="{{ path('app_user_desactive', {'id': app.user.id}) }}" method = "POST">
				<input class="bg-transparent hover:bg-red-500 text-red-700 font-semibold hover:text-white py-2 px-4 border border-red-500 hover:border-transparent rounded cursor-pointer w-full mt-2" type="submit" value= "Supprimer mon compte">

			</form>


		</div>

	</section>
{% endblock %}
