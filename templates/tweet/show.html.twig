{# templates/tweet/show.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Tweet de
	{{ tweet.idUser.name }}
{% endblock %}

{% block body %}
	<div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg mt-8 p-6 md:p-8">
		<h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b-2 border-blue-200 pb-2">Détails du Tweet de
			{{ tweet.idUser.name }}
			{% if tweet.idUser.photo is not null %}
				<img class="w-10 h-10 rounded mr-2" src="{{ asset('uploads/photos/' ~ tweet.idUser.photo) }}" alt="Photo de {{ tweet.idUser.name }}">
			{% else %}
				<img class="w-10 h-10 rounded mr-2" src="{{ asset('img/personne.png') }}" alt="Photo de {{ tweet.idUser.name }}">
			{% endif %}
		</h2>


		<div class="bg-blue-50 p-4 rounded-lg mb-4 border border-blue-200">
			<p class="text-gray-800 mb-2 text-lg">{{ tweet.content }}</p>
			<small class="text-gray-500 text-sm">Publié le
				{{ tweet.creationTime|date('d/m/Y H:i') }}</small>
			{% if tweet.retweetCount > 0 %}
				<p class="text-gray-600 text-sm mt-2">{{ tweet.retweetCount }}
					retweets</p>
			{% endif %}
		</div>
		{# section medias #}
		<h3 class="text-xl font-semibold text-gray-700 mt-8 mb-4 border-b border-gray-200 pb-2">Photos</h3>

		<div class="flex w-100 justify-center gap-1 p-6 flex-wrap">
			{% if tweet.media|length > 0 %}
				{% for media in tweet.media %}

					<img class="w-{{ tweet.media|length > 1 ? " 40" : " 100" }}" src="{{ media.urlMedia }}" alt="">

				{% endfor %}
			{% endif %}
		</div>

		{# section commentaires #}
		<h3 class="text-xl font-semibold text-gray-700 mt-8 mb-4 border-b border-gray-200 pb-2">Commentaires</h3>

		{% if tweet.comment is not empty %}
			{% for comment in tweet.comment %}
				<div class="bg-gray-100 p- rounded-lg mb-3 border border-gray-200">
					<p class="text-gray-700 mb-1">{{ comment.content }}</p>
					<small class="text-gray-500 text-xs">
						<div class="flex flex-col">
							<h4 class="font-bold text-xl mb-1">{{ comment.user.nickname }}</h4>

							{% if comment.user.photo is not null %}
								<img class="w-10 h-10 rounded mr-2" src="{{ asset('uploads/photos/' ~ comment.user.photo) }}" alt="Photo de {{ comment.user.name }}">
							{% else %}
								<img class="w-10 h-10 rounded mr-2" src="{{ asset('img/personne.png') }}" alt="Photo de {{ comment.user.name }}">
							{% endif %}
						</div>
						Publié le
						{{ comment.dateTime|date('d/m/Y H:i') }}
					</small>
				</div>
			{% endfor %}
		{% else %}
			<p class="text-gray-600 italic">Aucun commentaire pour ce tweet.</p>
		{% endif %}


	</div>
	<div class="max-w-4xl mx-auto mt-8 flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
		{% if is_granted('ROLE_ADMIN') %}
			<a href="{{ path('app_panel_admin')}}" class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded cursor-pointer mt-2">Retour au panel Admin</a>
		{% else %}
			<a href="{{ path('app_profile_show', {'id': tweet.idUser.id}) }}" class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded cursor-pointer mt-2">Retour au profil de {{ tweet.idUser.name }}</a>

			<a href="{{ path('app_tweet_index') }}" class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded cursor-pointer mt-2">Retour à la liste</a>
			{% if app.user and tweet.idUser.id == app.user.id %}
				<a href="{{ path('app_tweet_edit', {'id': tweet.id}) }}" class="bg-transparent hover:bg-green-500 text-green-700 font-semibold hover:text-white py-2 px-4 border border-green-500 hover:border-transparent rounded cursor-pointer mt-2">Modifier</a>
				{{ include('tweet/_delete_form.html.twig') }}
			{% endif %}
		{% endif %}
	</div>
{% endblock %}
